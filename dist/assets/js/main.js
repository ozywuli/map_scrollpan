!function e(t,n,r){function a(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return a(n?n:e)},u,u.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){"use strict";var r=e("./handlebars/base"),a=e("./handlebars/safe-string")["default"],i=e("./handlebars/exception")["default"],o=e("./handlebars/utils"),s=e("./handlebars/runtime"),l=function(){var e=new r.HandlebarsEnvironment;return o.extend(e,r),e.SafeString=a,e.Exception=i,e.Utils=o,e.VM=s,e.template=function(t){return s.template(t,e)},e},c=l();c.create=l,n["default"]=c},{"./handlebars/base":2,"./handlebars/exception":3,"./handlebars/runtime":4,"./handlebars/safe-string":5,"./handlebars/utils":6}],2:[function(e,t,n){"use strict";function r(e,t){this.helpers=e||{},this.partials=t||{},a(this)}function a(e){e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new s("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse||function(){},a=n.fn;return f(t)&&(t=t.call(this)),t===!0?a(this):t===!1||null==t?r(this):p(t)?t.length>0?e.helpers.each(t,n):r(this):a(t)}),e.registerHelper("each",function(e,t){var n,r=t.fn,a=t.inverse,i=0,o="";if(f(e)&&(e=e.call(this)),t.data&&(n=m(t.data)),e&&"object"==typeof e)if(p(e))for(var s=e.length;s>i;i++)n&&(n.index=i,n.first=0===i,n.last=i===e.length-1),o+=r(e[i],{data:n});else for(var l in e)e.hasOwnProperty(l)&&(n&&(n.key=l,n.index=i,n.first=0===i),o+=r(e[l],{data:n}),i++);return 0===i&&(o=a(this)),o}),e.registerHelper("if",function(e,t){return f(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){return f(e)&&(e=e.call(this)),o.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,n){var r=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(r,t)})}function i(e,t){v.log(e,t)}var o=e("./utils"),s=e("./exception")["default"],l="1.3.0";n.VERSION=l;var c=4;n.COMPILER_REVISION=c;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};n.REVISION_CHANGES=u;var p=o.isArray,f=o.isFunction,h=o.toString,d="[object Object]";n.HandlebarsEnvironment=r,r.prototype={constructor:r,logger:v,log:i,registerHelper:function(e,t,n){if(h.call(e)===d){if(n||t)throw new s("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){h.call(e)===d?o.extend(this.partials,e):this.partials[e]=t}};var v={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(v.level<=e){var n=v.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};n.logger=v,n.log=i;var m=function(e){var t={};return o.extend(t,e),t};n.createFrame=m},{"./exception":3,"./utils":6}],3:[function(e,t,n){"use strict";function r(e,t){var n;t&&t.firstLine&&(n=t.firstLine,e+=" - "+n+":"+t.firstColumn);for(var r=Error.prototype.constructor.call(this,e),i=0;i<a.length;i++)this[a[i]]=r[a[i]];n&&(this.lineNumber=n,this.column=t.firstColumn)}var a=["description","fileName","lineNumber","message","name","number","stack"];r.prototype=new Error,n["default"]=r},{}],4:[function(e,t,n){"use strict";function r(e){var t=e&&e[0]||1,n=p;if(t!==n){if(n>t){var r=f[n],a=f[t];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+a+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function a(e,t){if(!t)throw new u("No environment passed to template");var n=function(e,n,r,a,i,o){var s=t.VM.invokePartial.apply(this,arguments);if(null!=s)return s;if(t.compile){var l={helpers:a,partials:i,data:o};return i[n]=t.compile(e,{data:void 0!==o},t),i[n](r,l)}throw new u("The partial "+n+" could not be compiled when running in runtime-only mode")},r={escapeExpression:c.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var r=this.programs[e];return n?r=o(e,t,n):r||(r=this.programs[e]=o(e,t)),r},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},c.extend(n,t),c.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,a){a=a||{};var i,o,s=a.partial?a:t;a.partial||(i=a.helpers,o=a.partials);var l=e.call(r,s,n,i,o,a.data);return a.partial||t.VM.checkRevision(r.compilerInfo),l}}function i(e,t,n){var r=Array.prototype.slice.call(arguments,3),a=function(e,a){return a=a||{},t.apply(this,[e,a.data||n].concat(r))};return a.program=e,a.depth=r.length,a}function o(e,t,n){var r=function(e,r){return r=r||{},t(e,r.data||n)};return r.program=e,r.depth=0,r}function s(e,t,n,r,a,i){var o={partial:!0,helpers:r,partials:a,data:i};if(void 0===e)throw new u("The partial "+t+" could not be found");return e instanceof Function?e(n,o):void 0}function l(){return""}var c=e("./utils"),u=e("./exception")["default"],p=e("./base").COMPILER_REVISION,f=e("./base").REVISION_CHANGES;n.checkRevision=r,n.template=a,n.programWithDepth=i,n.program=o,n.invokePartial=s,n.noop=l},{"./base":2,"./exception":3,"./utils":6}],5:[function(e,t,n){"use strict";function r(e){this.string=e}r.prototype.toString=function(){return""+this.string},n["default"]=r},{}],6:[function(e,t,n){"use strict";function r(e){return l[e]||"&amp;"}function a(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function i(e){return e instanceof s?e.toString():e||0===e?(e=""+e,u.test(e)?e.replace(c,r):e):""}function o(e){return e||0===e?h(e)&&0===e.length?!0:!1:!0}var s=e("./safe-string")["default"],l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,u=/[&<>"'`]/;n.extend=a;var p=Object.prototype.toString;n.toString=p;var f=function(e){return"function"==typeof e};f(/x/)&&(f=function(e){return"function"==typeof e&&"[object Function]"===p.call(e)});var f;n.isFunction=f;var h=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===p.call(e):!1};n.isArray=h,n.escapeExpression=i,n.isEmpty=o},{"./safe-string":5}],7:[function(e,t,n){t.exports=e("./dist/cjs/handlebars.runtime")},{"./dist/cjs/handlebars.runtime":1}],8:[function(e,t,n){t.exports=e("handlebars/runtime")["default"]},{"handlebars/runtime":7}],9:[function(e,t,n){!function(){t.exports=function(){var e=$(".menu__link--about"),t=$(".about-page"),n="about-page--active";e.on("click",function(e){$("body").hasClass(n)?(e.preventDefault(),$("body").removeClass(n)):(e.preventDefault(),$("body").addClass(n))}),t.on("click",function(e){e.preventDefault(),$(".about-content").is(e.target)||$(".about-content").find("*").is(e.target)||$("body").removeClass(n)})}}()},{}],10:[function(e,t,n){t.exports=function(e,t,n){var r;return function(){var a=this,i=arguments,o=function(){r=null,n||e.apply(a,i)},s=n&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(a,i)}}},{}],11:[function(e,t,n){var r=e("./menu.js");r();var a=e("./about.js");a();var i=e("./map.js");i();var o=e("./mobile.js");o()},{"./about.js":9,"./map.js":12,"./menu.js":13,"./mobile.js":14}],12:[function(e,t,n){var r=e("./debounce.js");t.exports=function(){function t(){$.getJSON("assets/data/info.json",function(t){var n=e("hbsfy/runtime");n.registerHelper("safe",function(e){return new n.SafeString(e)});var r=e("./template.hbs");$list=r(t),$(".blocks").append($list);var a=e("./nav.hbs");$navList=a(t),$(".nav").append($navList)})}L.mapbox.accessToken="pk.eyJ1IjoiYW9zaWthIiwiYSI6IjQzRGIxeEkifQ.7OvmyBbXwwt9Qxjlh9Qd3w";var n=L.mapbox.map("map","mapbox.streets",{zoomControl:!1}).setView([40,10],5);n.scrollWheelZoom.disable(),L.control.zoomslider().addTo(n);var a=(e("./mobile.js"),$(".expand-map"));a.on("click",function(e){e.preventDefault(),$("body").hasClass("expanded")?($("body").removeClass("expanded"),n.invalidateSize()):($("body").addClass("expanded"),n.invalidateSize())}),$.getJSON("assets/data/test.geojson",function(e){console.log(e);L.mapbox.featureLayer(e).addTo(n)}),$.getJSON("assets/data/destinations.geojson",function(e){function t(e){if(e!==s){a.eachLayer(function(t){console.log(t.feature.properties.title.toLowerCase().replace(/\s/g,"-"));var r=t.feature.properties.title.toLowerCase().replace(/\s/g,"-");r===e?(n.setView(t.getLatLng(),t.feature.properties.zoom||5),t.setIcon(L.mapbox.marker.icon({"marker-color":"#a8f"}))):t.setIcon(L.mapbox.marker.icon({"marker-color":"#404040"}))});for(var t=0;t<o.length;t++)o[t].id===e?$(o[t]).addClass("active"):$(o[t]).removeClass("active");s=e}}var a=L.mapbox.featureLayer(e).addTo(n),i=$("#narrative"),o=narrative.getElementsByTagName("section"),s="";t("cover"),$(".nav").on("click",".nav__link",function(e){e.preventDefault();var r=$(this).attr("data-id");console.log(r),t(r),$(".nav").removeClass("nav--active");var a=$(".active");$("html, body").animate({scrollTop:a.offset().top+50}),$("body").removeClass("expanded"),n.invalidateSize()});var l=r(function(){for(var e=i.height(),n=s,r=o.length-1;r>=0;r--){var a=o[r].getBoundingClientRect();a.top>=0&&a.top<=e&&(n=o[r].id)}t(n)},150);$(window).on("scroll",function(){l()}),a.eachLayer(function(e){e.on("click",function(){t(this.feature.properties.title.toLowerCase().replace(/\s/g,"-"));var e=$(".active");$("html, body").animate({scrollTop:e.offset().top-150}),$("body").removeClass("expanded"),n.invalidateSize()})})}).done(t())}},{"./debounce.js":10,"./mobile.js":14,"./nav.hbs":15,"./template.hbs":16,"hbsfy/runtime":8}],13:[function(e,t,n){!function(){t.exports=function(){var e=$(".menu__link--nav"),t=$(".nav");e.on("click",function(e){e.preventDefault(),t.hasClass("nav--active")?t.removeClass("nav--active"):t.addClass("nav--active")}),$("html, body").on("click",function(n){t.is(n.target)||t.find("*").is(n.target)||e.is(n.target)||e.find("*").is(n.target)||t.removeClass("nav--active")})}}()},{}],14:[function(e,t,n){t.exports=function(){}},{}],15:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template(function(e,t,n,r,a){function i(e,t){var r,a,i="";return i+='\r\n  <a href="#" class="nav__link" data-id="',(a=n.id)?r=a.call(e,{hash:{},data:t}):(a=e&&e.id,r=typeof a===s?a.call(e,{hash:{},data:t}):a),i+=l(r)+'"><span class="nav__title">',(a=n.title)?r=a.call(e,{hash:{},data:t}):(a=e&&e.title,r=typeof a===s?a.call(e,{hash:{},data:t}):a),i+=l(r)+"</span></a>\r\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,s="function",l=this.escapeExpression,c=this;return o=n.each.call(t,t&&t.destinations,{hash:{},inverse:c.noop,fn:c.program(1,i,a),data:a}),o||0===o?o:""})},{"hbsfy/runtime":8}],16:[function(e,t,n){var r=e("hbsfy/runtime");t.exports=r.template(function(e,t,n,r,a){function i(e,t){var r,a,i,o="";return o+="\r\n<section id='",(a=n.id)?r=a.call(e,{hash:{},data:t}):(a=e&&e.id,r=typeof a===s?a.call(e,{hash:{},data:t}):a),o+=l(r)+'\' class="block">\r\n  <h3 class="block__title">',(a=n.title)?r=a.call(e,{hash:{},data:t}):(a=e&&e.title,r=typeof a===s?a.call(e,{hash:{},data:t}):a),o+=l(r)+'</h3>\r\n  <img src="',(a=n.imgSrc)?r=a.call(e,{hash:{},data:t}):(a=e&&e.imgSrc,r=typeof a===s?a.call(e,{hash:{},data:t}):a),o+=l(r)+'" alt="" class="block__img">\r\n  <div>'+l((a=n.safe||e&&e.safe,i={hash:{},data:t},a?a.call(e,e&&e.description,i):c.call(e,"safe",e&&e.description,i)))+"</div>\r\n</section>\r\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),a=a||{};var o,s="function",l=this.escapeExpression,c=n.helperMissing,u=this;return o=n.each.call(t,t&&t.destinations,{hash:{},inverse:u.noop,fn:u.program(1,i,a),data:a}),o||0===o?o:""})},{"hbsfy/runtime":8}]},{},[11]);